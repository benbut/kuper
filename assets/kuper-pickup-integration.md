# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∞–º–æ–≤—ã–≤–æ–∑–æ–º - –ö—É–ø–µ—Ä API

–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ç–∏–ø–∞ **"–°–±–æ—Ä–∫–∞ –º–µ—Ä—á–∞–Ω—Ç–∞, —Å–∞–º–æ–≤—ã–≤–æ–∑"** –¥–ª—è Push-–º–æ–¥–µ–ª–∏ –ö—É–ø–µ—Ä API.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞

–ü—Ä–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–∞–º–æ–≤—ã–≤–æ–∑–æ–º:
- **–ú–µ—Ä—á–∞–Ω—Ç** —Å–æ–±–∏—Ä–∞–µ—Ç –∑–∞–∫–∞–∑ –≤ —Å–≤–æ–µ–º –º–∞–≥–∞–∑–∏–Ω–µ
- **–ö–ª–∏–µ–Ω—Ç** —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–µ–∑–∂–∞–µ—Ç –∏ –∑–∞–±–∏—Ä–∞–µ—Ç –∑–∞–∫–∞–∑
- **–û–ø–ª–∞—Ç–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞**
- **–ú–µ—Ä—á–∞–Ω—Ç** —Å–æ–∑–¥–∞–µ—Ç –∫–æ–¥ –≤—ã–¥–∞—á–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –≤—ã–¥–∞—á–∏

## üîÑ –û—Å–Ω–æ–≤–Ω–∞—è –±–ª–æ–∫-—Å—Ö–µ–º–∞

```mermaid
flowchart TD
    Start([–ö–ª–∏–µ–Ω—Ç –æ—Ñ–æ—Ä–º–ª—è–µ—Ç –∑–∞–∫–∞–∑ —Å —Å–∞–º–æ–≤—ã–≤–æ–∑–æ–º]) --> A[–ö—É–ø–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook: order.created]
    A --> B{–ú–µ—Ä—á–∞–Ω—Ç –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–∫–∞–∑?}
    
    B -->|–î–∞| C[–ú–µ—Ä—á–∞–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç: status created, number ID]
    B -->|–ù–µ—Ç| D[–ú–µ—Ä—á–∞–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç: status created, –∑–∞—Ç–µ–º order.canceled]
    
    C --> E{–ó–∞–∫–∞–∑ –∏–∑ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞?}
    E -->|–î–∞| F[–ú–µ—Ä—á–∞–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: order.accepted]
    E -->|–ù–µ—Ç| G[–ú–µ—Ä—á–∞–Ω—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–±–æ—Ä–∫—É]
    F --> G
    
    G --> H[–ú–µ—Ä—á–∞–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: order.in_work]
    H --> I[–ú–µ—Ä—á–∞–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –∑–∞–∫–∞–∑]
    I --> J[–ú–µ—Ä—á–∞–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: order.assembled]
    J --> K[–ú–µ—Ä—á–∞–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: order.ready_for_delivery + –∏—Ç–æ–≥–æ–≤—ã–π —Å–æ—Å—Ç–∞–≤]
    
    K --> L[–ú–µ—Ä—á–∞–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: order.pickup_code_created]
    L --> P[–ö–ª–∏–µ–Ω—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç –∑–∞ –∑–∞–∫–∞–∑–æ–º —Å –∫–æ–¥–æ–º]
    P --> Q[–ú–µ—Ä—á–∞–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ –≤—ã–¥–∞—á–∏]
    Q --> R[–ö–ª–∏–µ–Ω—Ç –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏]
    R --> S[–ú–µ—Ä—á–∞–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: order.delivered + –∏—Ç–æ–≥–æ–≤—ã–π —Å–æ—Å—Ç–∞–≤]
    
    D --> Cancel[–ó–∞–∫–∞–∑ –æ—Ç–º–µ–Ω–µ–Ω]
    S --> End([–ó–∞–∫–∞–∑ –∑–∞–≤–µ—Ä—à–µ–Ω])
    Cancel --> End
    
    subgraph "–í–æ–∑–º–æ–∂–Ω—ã–µ –æ—Ç–º–µ–Ω—ã"
        AnyCancel[order.canceled —Å –ø—Ä–∏—á–∏–Ω–æ–π –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ –¥–æ –≤—ã–¥–∞—á–∏]
    end
    
    style Start fill:#e3f2fd
    style End fill:#c8e6c9
    style Cancel fill:#ffcdd2
    style A fill:#fff3e0
    style H fill:#fff3e0
    style J fill:#fff3e0
    style K fill:#fff3e0
    style L fill:#fff3e0
    style R fill:#e8f5e8
    style S fill:#e8f5e8
```

## üì± –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

```mermaid
sequenceDiagram
    participant Client as –ö–ª–∏–µ–Ω—Ç
    participant Kuper as –ö—É–ø–µ—Ä
    participant Merchant as –ú–µ—Ä—á–∞–Ω—Ç
    participant Store as –ú–∞–≥–∞–∑–∏–Ω
    
    Client->>Kuper: –û—Ñ–æ—Ä–º–ª—è–µ—Ç –∑–∞–∫–∞–∑ —Å —Å–∞–º–æ–≤—ã–≤–æ–∑–æ–º
    Note over Kuper: –°–æ–∑–¥–∞–µ—Ç –∑–∞–∫–∞–∑ –≤ —Å–∏—Å—Ç–µ–º–µ
    
    Kuper->>Merchant: webhook: order.created
    Note over Merchant: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏
    
    alt –ó–∞–∫–∞–∑ –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å
        Merchant->>Kuper: response: status created, number MERCHANT_ID
        
        opt –ó–∞–∫–∞–∑ –∏–∑ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
            Merchant->>Kuper: notification: order.accepted
            Note over Kuper: –§–∏–∫—Å–∏—Ä—É–µ—Ç –ø—Ä–∏–Ω—è—Ç–∏–µ –∑–∞–∫–∞–∑–∞
        end
        
        Merchant->>Kuper: notification: order.in_work
        Note over Store: –ù–∞—á–∏–Ω–∞–µ—Ç —Å–±–æ—Ä–∫—É –∑–∞–∫–∞–∑–∞
        
        Note over Merchant: –°–æ–±–∏—Ä–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫–∞–∑–∞
        Merchant->>Kuper: notification: order.assembled
        
        Merchant->>Kuper: notification: order.ready_for_delivery + –∏—Ç–æ–≥–æ–≤—ã–π —Å–æ—Å—Ç–∞–≤
        Note over Kuper: –ü–æ–ª—É—á–∞–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞
        
        Merchant->>Kuper: notification: order.pickup_code_created + –∫–æ–¥ –≤—ã–¥–∞—á–∏
        Note over Kuper: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–¥ –∫–ª–∏–µ–Ω—Ç—É
        
        Note over Client: –ü–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –∫–æ–¥–æ–º –≤—ã–¥–∞—á–∏
        Client->>Store: –ü—Ä–∏—Ö–æ–¥–∏—Ç –≤ –º–∞–≥–∞–∑–∏–Ω —Å –∫–æ–¥–æ–º
        
        Store->>Merchant: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ –≤—ã–¥–∞—á–∏
        Note over Store: –ö–ª–∏–µ–Ω—Ç –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏
        Note over Store: –í—ã–¥–∞–µ—Ç –∑–∞–∫–∞–∑ –∫–ª–∏–µ–Ω—Ç—É
        
        Merchant->>Kuper: notification: order.delivered + —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—ã–¥–∞–Ω–Ω—ã–π —Å–æ—Å—Ç–∞–≤
        Note over Kuper: –ó–∞–∫–∞–∑ –∑–∞–≤–µ—Ä—à–µ–Ω
        
    else –ó–∞–∫–∞–∑ –Ω–µ–ª—å–∑—è –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å
        Merchant->>Kuper: response: status created, number MERCHANT_ID
        Merchant->>Kuper: notification: order.canceled + –ø—Ä–∏—á–∏–Ω–∞
        Note over Kuper: –£–≤–µ–¥–æ–º–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –æ–± –æ—Ç–º–µ–Ω–µ
    end
    
    opt –û—Ç–º–µ–Ω–∞ –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ
        alt –û—Ç–º–µ–Ω–∞ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –ö—É–ø–µ—Ä–∞/–∫–ª–∏–µ–Ω—Ç–∞
            Kuper->>Merchant: webhook: order.canceled + –ø—Ä–∏—á–∏–Ω–∞
        else –û—Ç–º–µ–Ω–∞ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –º–µ—Ä—á–∞–Ω—Ç–∞
            Merchant->>Kuper: notification: order.canceled + –ø—Ä–∏—á–∏–Ω–∞
        end
        Note over Kuper: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É –æ–± –æ—Ç–º–µ–Ω–µ
    end
```

## üéØ –í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞ —Å–æ–±—ã—Ç–∏–π

```mermaid
timeline
    title –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞–∫–∞–∑–∞ —Å —Å–∞–º–æ–≤—ã–≤–æ–∑–æ–º
    
    section –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–∏–Ω—è—Ç–∏–µ
        –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω : –ö–ª–∏–µ–Ω—Ç –≤—ã–±—Ä–∞–ª —Å–∞–º–æ–≤—ã–≤–æ–∑
                     : order.created ‚Üí response
        –ü—Ä–∏–Ω—è—Ç–∏–µ : order.accepted (–¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤)
                 : –ó–∞–∫–∞–∑ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –≤ —Å–∏—Å—Ç–µ–º–µ –º–µ—Ä—á–∞–Ω—Ç–∞
        
    section –°–±–æ—Ä–∫–∞ –∑–∞–∫–∞–∑–∞
        –ù–∞—á–∞–ª–æ —Å–±–æ—Ä–∫–∏ : order.in_work
                     : –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞: collecting
        –ü—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ : –ú–µ—Ä—á–∞–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏
                      : –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —Å–æ—Å—Ç–∞–≤–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
        –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–±–æ—Ä–∫–∏ : order.assembled
                         : –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞: assembled
        
    section –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –≤—ã–¥–∞—á–µ
        –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å : order.ready_for_delivery + –∏—Ç–æ–≥–æ–≤—ã–π —Å–æ—Å—Ç–∞–≤
                   : –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞: ready_to_ship
        –ö–æ–¥ –≤—ã–¥–∞—á–∏ : order.pickup_code_created + –∫–æ–¥
                   : –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–¥ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
        
    section –í—ã–¥–∞—á–∞ –∑–∞–∫–∞–∑–∞
        –ü—Ä–∏–±—ã—Ç–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ : –ö–ª–∏–µ–Ω—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –º–∞–≥–∞–∑–∏–Ω
                        : –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–¥ –≤—ã–¥–∞—á–∏
        –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ : –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥
                     : –°–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞
        –û–ø–ª–∞—Ç–∞ : –ö–ª–∏–µ–Ω—Ç –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏
               : –ù–∞–ª–∏—á–Ω—ã–º–∏ –∏–ª–∏ –∫–∞—Ä—Ç–æ–π –≤ –º–∞–≥–∞–∑–∏–Ω–µ
        –í—ã–¥–∞—á–∞ : order.delivered + —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–æ—Å—Ç–∞–≤
               : –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞: shipped
```

## üìã –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å–∞–º–æ–≤—ã–≤–æ–∑–∞

### ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ –¥–ª—è –º–µ—Ä—á–∞–Ω—Ç–∞:

1. **order.pickup_code_created** - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–¥–∞ –≤—ã–¥–∞—á–∏
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ `order.ready_for_delivery`
   - –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –¥–ª—è –∑–∞–∫–∞–∑–∞
   - –ö—É–ø–µ—Ä –ø–µ—Ä–µ–¥–∞–µ—Ç –∫–æ–¥ –∫–ª–∏–µ–Ω—Ç—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

2. **order.delivered** - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–¥–∞—á–∏
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –∑–∞–±—Ä–∞–ª –∑–∞–∫–∞–∑
   - **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –≤–∫–ª—é—á–∞–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—ã–¥–∞–Ω–Ω—ã–π —Å–æ—Å—Ç–∞–≤
   - –ú–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç –∑–∞–∫–∞–∑–∞–Ω–Ω–æ–≥–æ (–∑–∞–º–µ–Ω—ã, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–∑–∏—Ü–∏–∏)

### üîÑ –ü—Ä–æ—Ü–µ—Å—Å –≤—ã–¥–∞—á–∏:

1. –ö–ª–∏–µ–Ω—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –º–∞–≥–∞–∑–∏–Ω
2. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–¥ –≤—ã–¥–∞—á–∏ (–∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ö—É–ø–µ—Ä–∞)
3. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ –≤ —Å–∏—Å—Ç–µ–º–µ
4. **–ö–ª–∏–µ–Ω—Ç –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç –∑–∞–∫–∞–∑ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏**
5. –í—ã–¥–∞–µ—Ç –∑–∞–∫–∞–∑ –∫–ª–∏–µ–Ω—Ç—É
6. –ú–µ—Ä—á–∞–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `order.delivered`

### üí≥ –û–ø–ª–∞—Ç–∞:

- **–¢–æ–ª—å–∫–æ –æ–ø–ª–∞—Ç–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏**: –ö–ª–∏–µ–Ω—Ç –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç –≤ –º–∞–≥–∞–∑–∏–Ω–µ –ø—Ä–∏ –≤—ã–¥–∞—á–µ –∑–∞–∫–∞–∑–∞
- –í–æ–∑–º–æ–∂–Ω–∞ –æ–ø–ª–∞—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏ –∏–ª–∏ –∫–∞—Ä—Ç–æ–π (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –º–∞–≥–∞–∑–∏–Ω–∞)
- –ù–∏–∫–∞–∫–∏—Ö –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–ø–∏—Å–∞–Ω–∏–π –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

## üì® –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–¥–∞ –≤—ã–¥–∞—á–∏

```json
POST https://merchant-api.sbermarket.ru/ofm/api/v1/notifications
Content-Type: application/json
Authorization: Bearer your-token

{
  "event_type": "order.pickup_code_created",
  "payload": {
    "orderUUID": "retailer-slug:265cb601-a78a-4862-9e9d-d6b48d6a0a3f",
    "number": "MERCHANT_ORDER_12345",
    "pickupCode": "1234"
  }
}
```

### 2. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–∞

```json
POST https://merchant-api.sbermarket.ru/ofm/api/v1/notifications
Content-Type: application/json
Authorization: Bearer your-token

{
  "event_type": "order.delivered",
  "payload": {
    "orderUUID": "retailer-slug:265cb601-a78a-4862-9e9d-d6b48d6a0a3f",
    "number": "MERCHANT_ORDER_12345",
    "positions": [
      {
        "id": "123456",
        "quantity": 1,
        "price": "199.99",
        "discountPrice": "189.99",
        "totalPrice": "189.99",
        "weight": "500"
      }
    ],
    "total": {
      "totalPrice": "189.99",
      "discountTotalPrice": "189.99"
    }
  }
}
```

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã

### üî¥ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

1. **–ö–æ–¥ –≤—ã–¥–∞—á–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–∫–∞–∑–∞
2. **–í order.delivered –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–æ—Å—Ç–∞–≤** –≤—ã–¥–∞–Ω–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞
3. **–ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–¥ –≤—ã–¥–∞—á–∏** –ø–µ—Ä–µ–¥ –≤—ã–¥–∞—á–µ–π –∑–∞–∫–∞–∑–∞ –∫–ª–∏–µ–Ω—Ç—É
4. **–û—Ç–ø—Ä–∞–≤–ª—è—Ç—å order.delivered —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –≤—ã–¥–∞—á–∏** –∑–∞–∫–∞–∑–∞
5. **–û–±–µ—Å–ø–µ—á–∏—Ç—å –ø—Ä–∏–µ–º –æ–ø–ª–∞—Ç—ã –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏** –≤ –º–∞–≥–∞–∑–∏–Ω–µ

### üì± UX –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞:

- –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –∫–æ–¥–æ–º –≤—ã–¥–∞—á–∏
- –ö–æ–¥ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ö—É–ø–µ—Ä–∞
- –ü—Ä–∏ –ø—Ä–∏–±—ã—Ç–∏–∏ –≤ –º–∞–≥–∞–∑–∏–Ω –∫–ª–∏–µ–Ω—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–¥ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É
- **–ö–ª–∏–µ–Ω—Ç –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç –∑–∞–∫–∞–∑ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏**
- –ü–æ—Å–ª–µ –≤—ã–¥–∞—á–∏ –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞

### üè™ –ü—Ä–æ—Ü–µ—Å—Å –≤ –º–∞–≥–∞–∑–∏–Ω–µ:

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤ –≤—ã–¥–∞—á–∏
2. –û–±—É—á–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø—Ä–æ—Ü–µ–¥—É—Ä–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–æ–≤
3. **–û–±–µ—Å–ø–µ—á–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–µ–º–∞ –æ–ø–ª–∞—Ç—ã –ø—Ä–∏ –≤—ã–¥–∞—á–µ**
4. –û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∑–æ–Ω—É –≤—ã–¥–∞—á–∏ –∑–∞–∫–∞–∑–æ–≤
5. –û–±–µ—Å–ø–µ—á–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–∞–≤–∞ –∑–∞–∫–∞–∑–∞

## üìã –ß–µ–∫-–ª–∏—Å—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:

- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤ –≤—ã–¥–∞—á–∏
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ `order.pickup_code_created` —Å –∫–æ–¥–æ–º
- [ ] –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–æ–≤ –≤—ã–¥–∞—á–∏ –≤ –º–∞–≥–∞–∑–∏–Ω–µ
- [ ] –û—Ç–ø—Ä–∞–≤–∫–∞ `order.delivered` —Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º —Å–æ—Å—Ç–∞–≤–æ–º
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–º–µ–Ω –¥–æ –º–æ–º–µ–Ω—Ç–∞ –≤—ã–¥–∞—á–∏
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∫–æ–¥–∞–º–∏

### üîÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

- [ ] QR-–∫–æ–¥—ã –¥–ª—è –±–æ–ª–µ–µ —É–¥–æ–±–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- [ ] SMS/Email –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –≤—ã–¥–∞—á–∏
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ —Å–±–æ—Ä–∫–∏
- [ ] –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Å–∞–º–æ–≤—ã–≤–æ–∑–∞
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞—Å—Å–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π

### üß™ –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

- [ ] –£—Å–ø–µ—à–Ω—ã–π –∑–∞–∫–∞–∑ —Å –æ–ø–ª–∞—Ç–æ–π –Ω–∞–ª–∏—á–Ω—ã–º–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏
- [ ] –£—Å–ø–µ—à–Ω—ã–π –∑–∞–∫–∞–∑ —Å –æ–ø–ª–∞—Ç–æ–π –∫–∞—Ä—Ç–æ–π –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏
- [ ] –û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞ –¥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–¥–∞ –≤—ã–¥–∞—á–∏
- [ ] –û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–¥–∞ –≤—ã–¥–∞—á–∏
- [ ] –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∫–æ–¥–æ–≤ –≤—ã–¥–∞—á–∏
- [ ] –û—Ç–∫–∞–∑ –∫–ª–∏–µ–Ω—Ç–∞ –æ—Ç –æ–ø–ª–∞—Ç—ã –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏

## üéØ –ü–æ—Ä—è–¥–æ–∫ —Å–æ–±—ã—Ç–∏–π

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

```
1. order.created (webhook –æ—Ç –ö—É–ø–µ—Ä–∞)
2. response: status created, number ID
3. order.accepted (–¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤)
4. order.in_work
5. order.assembled
6. order.ready_for_delivery + –∏—Ç–æ–≥–æ–≤—ã–π —Å–æ—Å—Ç–∞–≤
7. order.pickup_code_created + –∫–æ–¥
8. [–ö–ª–∏–µ–Ω—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –º–∞–≥–∞–∑–∏–Ω –∏ –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏]
9. order.delivered + —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–æ—Å—Ç–∞–≤
```

### ‚ùå –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:

- –û—Ç–ø—Ä–∞–≤–∫–∞ `order.delivered` –±–µ–∑ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ—Å—Ç–∞–≤–∞
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–µ—É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤ –≤—ã–¥–∞—á–∏
- –û—Ç–ø—Ä–∞–≤–∫–∞ `order.pickup_code_created` –¥–æ `order.ready_for_delivery`
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞ –ø–µ—Ä–µ–¥ –≤—ã–¥–∞—á–µ–π –∑–∞–∫–∞–∑–∞
- **–í—ã–¥–∞—á–∞ –∑–∞–∫–∞–∑–∞ –±–µ–∑ –æ–ø–ª–∞—Ç—ã –∫–ª–∏–µ–Ω—Ç–æ–º**

---

**–°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- [–û–±—â–∞—è —Å—Ö–µ–º–∞ Push-–º–æ–¥–µ–ª–∏](./kuper-push-model-flowchart.md)
- [–î–æ—Å—Ç–∞–≤–∫–∞ –ö—É–ø–µ—Ä–∞](./kuper-delivery-integration.md)
- [–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ API](./kuper-api-reference.md)
- [–î–∏–∞–≥—Ä–∞–º–º—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π](./kuper-order-states.md)

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [docs.kuper.ru](https://docs.kuper.ru/api-products/merchant-service/orders/description) 